---
tags:
  - NodeJS
  - TypeScript
---
# TypeScript 環境建置指令與檔案說明

## 📦 安裝套件指令

### 1. 初始化 npm 專案

```bash
npm init -y
```

**用途：** 建立 `package.json` 檔案，這是 Node.js 專案的設定檔 **參數說明：**

- `-y` 或 `--yes`：自動回答所有問題為「是」，快速產生預設的 package.json

**產生的檔案：** `package.json`

- 記錄專案資訊（名稱、版本、描述等）
- 記錄專案依賴的套件
- 定義可執行的腳本指令
- 讓其他人可以透過 `npm install` 安裝相同的套件

---

### 2. 安裝 TypeScript

```bash
npm install --save-dev typescript
```

**用途：** 將 TypeScript 編譯器安裝到專案中 **參數說明：**

- `--save-dev` 或 `-D`：安裝為開發依賴（devDependencies），表示只在開發階段需要，不會被打包到正式環境

**套件功能：**

- 提供 `tsc` 指令來編譯 TypeScript 成 JavaScript
- 提供型別檢查功能
- 版本獨立於專案，避免全域版本衝突

---

### 3. 安裝 Node.js 型別定義

```bash
npm install --save-dev @types/node
```

**用途：** 安裝 Node.js 的 TypeScript 型別定義檔 **套件功能：**

- 讓 TypeScript 認識 Node.js 的 API（如 `fs`, `path`, `http` 等）
- 提供 Node.js 全域物件的型別（如 `process`, `__dirname`, `Buffer` 等）
- 提供自動完成和型別檢查
- 包含 `.d.ts` 檔案（只有型別定義，沒有實際程式碼）

---

### 4. 安裝 ts-node（可選但推薦）

```bash
npm install --save-dev ts-node
```

**用途：** 直接執行 TypeScript 檔案，不需要先編譯成 JavaScript **套件功能：**

- 在開發階段可以用 `ts-node file.ts` 直接執行
- 省去「編譯 → 執行」的兩步驟
- 適合快速測試和開發

**使用方式：**

```bash
# 不使用 ts-node（需要兩步驟）
npx tsc src/index.ts    # 先編譯
node src/index.js       # 再執行

# 使用 ts-node（一步到位）
npx ts-node src/index.ts
```

---

### 5. 安裝 nodemon（可選）

```bash
npm install --save-dev nodemon
```

**用途：** 監聽檔案變化，自動重新執行程式 **套件功能：**

- 當你修改程式碼並儲存時，自動重新執行
- 提升開發效率，不用手動重啟

**使用方式：**

```bash
nodemon --watch src --exec ts-node src/index.ts
```

---

## ⚙️ 初始化 TypeScript 設定

### 指令

```bash
npx tsc --init
```

**用途：** 產生 TypeScript 設定檔 `tsconfig.json`

**什麼是 npx？**

- `npx` 是 npm 5.2+ 內建的工具
- 用來執行專案本地安裝的指令（不需要全域安裝）
- `npx tsc` 會使用專案內的 TypeScript，而不是全域的

**產生的檔案：** `tsconfig.json`

---

## 📄 重要檔案說明

### 1. package.json

**位置：** 專案根目錄 **作用：** Node.js 專案的核心設定檔

**範例內容：**

```json
{
  "name": "my-typescript-project",
  "version": "1.0.0",
  "description": "我的 TypeScript 專案",
  "main": "dist/index.js",
  "scripts": {
    "build": "tsc",
    "start": "node dist/index.js",
    "dev": "ts-node src/index.ts",
    "dev:watch": "nodemon --watch src --exec ts-node src/index.ts"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "@types/node": "^20.10.0",
    "nodemon": "^3.0.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.3.3"
  }
}
```

**重要欄位：**

- `name`：專案名稱
- `version`：專案版本
- `main`：專案的入口檔案
- `scripts`：自訂指令（可用 `npm run 指令名稱` 執行）
- `devDependencies`：開發階段需要的套件
- `dependencies`：正式環境也需要的套件

---

### 2. tsconfig.json

**位置：** 專案根目錄 **作用：** TypeScript 編譯器的設定檔

**範例內容（新手友善版）：**

```json
{
  "compilerOptions": {
    /* 基本選項 */
    "target": "ES2020",                     // 編譯目標版本
    "module": "commonjs",                   // 模組系統
    "lib": ["ES2020"],                      // 可用的標準函式庫
    
    /* 輸入輸出 */
    "rootDir": "./src",                     // TypeScript 原始碼位置
    "outDir": "./dist",                     // 編譯後的 JavaScript 輸出位置
    
    /* 型別檢查（強烈建議開啟）*/
    "strict": true,                         // 啟用所有嚴格檢查
    "noImplicitAny": true,                  // 不允許隱含的 any 型別
    "strictNullChecks": true,               // 嚴格檢查 null 和 undefined
    
    /* 模組解析 */
    "esModuleInterop": true,                // 改善模組相容性
    "moduleResolution": "node",             // 使用 Node.js 的模組解析策略
    
    /* 其他 */
    "skipLibCheck": true,                   // 跳過函式庫型別檢查（加快編譯）
    "forceConsistentCasingInFileNames": true // 強制檔名大小寫一致
  },
  "include": ["src/**/*"],                  // 要編譯的檔案
  "exclude": ["node_modules", "dist"]       // 排除的資料夾
}
```

**常用選項說明：**

- `target`：編譯成哪個版本的 JavaScript（ES5, ES2020, ESNext 等）
- `module`：使用哪種模組系統（commonjs, es2015, esnext 等）
- `rootDir`：TypeScript 原始碼的根目錄
- `outDir`：編譯後的 JavaScript 檔案要放在哪裡
- `strict`：啟用所有嚴格型別檢查（建議開啟）
- `include`：哪些檔案要被編譯
- `exclude`：哪些檔案要被排除

---

### 3. package-lock.json

**位置：** 專案根目錄 **作用：** 鎖定套件的確切版本 **產生時機：** 執行 `npm install` 時自動產生

**重要性：**

- 確保所有開發者安裝相同版本的套件
- 提供可重現的建置環境
- **應該加入版本控制（Git）**

---

### 4. node_modules/

**位置：** 專案根目錄 **作用：** 存放所有安裝的 npm 套件 **產生時機：** 執行 `npm install` 時自動產生

**注意事項：**

- 檔案非常多、非常大
- **不應該**加入版本控制（加入 `.gitignore`）
- 其他人可以透過 `npm install` 重新產生

---

### 5. .gitignore

**位置：** 專案根目錄 **作用：** 告訴 Git 哪些檔案不要追蹤

**建議內容：**

```
node_modules/
dist/
*.log
.env
.DS_Store
```

---

## 🎯 常用 npm scripts 設定

在 `package.json` 的 `scripts` 欄位中定義：

```json
{
  "scripts": {
    "build": "tsc",
    "start": "node dist/index.js",
    "dev": "ts-node src/index.ts",
    "dev:watch": "nodemon --watch src --exec ts-node src/index.ts",
    "clean": "rm -rf dist"
  }
}
```

**執行方式：**

```bash
npm run build        # 編譯 TypeScript
npm run start        # 執行編譯後的程式
npm run dev          # 開發模式（直接執行 TypeScript）
npm run dev:watch    # 開發模式 + 自動重啟
npm run clean        # 清除編譯輸出
```

---

## 📁 建議的專案結構

```
my-typescript-project/
├── src/                    # TypeScript 原始碼
│   ├── index.ts           # 主程式
│   ├── utils/             # 工具函數
│   └── types/             # 型別定義
├── dist/                   # 編譯輸出（自動產生，不加入 Git）
│   └── index.js
├── node_modules/           # 套件（自動產生，不加入 Git）
├── .gitignore             # Git 忽略清單
├── package.json           # npm 專案設定
├── package-lock.json      # 套件版本鎖定
└── tsconfig.json          # TypeScript 設定
```

---

## 🚀 完整初始化流程

```bash
# 1. 建立專案資料夾
mkdir my-project
cd my-project

# 2. 初始化 npm（產生 package.json）
npm init -y

# 3. 安裝必要套件
npm install --save-dev typescript @types/node ts-node

# 4. 初始化 TypeScript（產生 tsconfig.json）
npx tsc --init

# 5. 建立目錄結構
mkdir src
mkdir dist

# 6. 建立 .gitignore
echo "node_modules/" > .gitignore
echo "dist/" >> .gitignore

# 7. 建立第一個程式
echo 'console.log("Hello TypeScript!");' > src/index.ts

# 8. 執行
npx ts-node src/index.ts
```

---

## 🔧 常用指令速查表

|指令|用途|
|---|---|
|`npm init -y`|初始化 npm 專案|
|`npm install 套件名稱`|安裝套件為正式依賴|
|`npm install --save-dev 套件名稱`|安裝套件為開發依賴|
|`npx tsc --init`|初始化 TypeScript 設定|
|`npx tsc`|編譯 TypeScript|
|`npx tsc --watch`|監聽模式編譯|
|`npx ts-node 檔案.ts`|直接執行 TypeScript|
|`npm run 腳本名稱`|執行 package.json 中的腳本|
|`npm install`|安裝 package.json 中列出的所有套件|

---

## 📌 重點整理

### 核心套件

- **typescript**：TypeScript 編譯器，必裝
- **@types/node**：Node.js 型別定義，在 Node.js 環境必裝
- **ts-node**：開發工具，可選但強烈推薦
- **nodemon**：開發工具，可選

### 核心檔案

- **package.json**：專案設定與依賴管理
- **tsconfig.json**：TypeScript 編譯設定
- **package-lock.json**：套件版本鎖定，要加入 Git
- **node_modules/**：套件資料夾，不加入 Git

### 指令區別

- `npm`：套件管理工具
- `npx`：執行本地安裝的指令
- `tsc`：TypeScript 編譯器
- `ts-node`：直接執行 TypeScript

---

這份筆記涵蓋了所有基本設定，你可以直接存檔，需要時快速查閱！有任何需要補充或調整的地方嗎？